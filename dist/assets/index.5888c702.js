import{b as A,d as X,_ as Ee}from"./index.16f36a6f.js";/* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Ve,e as g,c as S,w as xe,aG as b,aS as qe,bz as Ae,B as o,C as B,aJ as u,aI as l,bA as D,aD as i,aN as r,F as h,aL as $,aK as O,aE as s,aO as F,u as G,aV as L,n as Ue,aW as Ie,bf as Te,bw as ze,bx as Me,by as Ne,bq as Se,b6 as $e,bs as Oe,bE as Ge,bp as Le,bk as Pe,bF as Re,b3 as He,b2 as je,bv as Je,bl as Ke,bm as We,b7 as Xe,aX as Qe,D as Ye,bD as Ze,b5 as el,bB as ll}from"./arco.a57bda95.js";import{u as ul}from"./loading.6f29e790.js";import{S as al,c as P}from"./sortable.esm.0dde07ee.js";import{_ as Q}from"./icon.vue_vue_type_script_setup_true_lang.8abf4382.js";import"./chart.bcf2bc51.js";import"./vue.7a37bc5c.js";function tl(_){return A.get("/api/system/menus",{params:_})}function ol(_){return A.post("/api/system/menu",_)}function nl(_){return A.put("/api/system/menu",_)}function il(_){return A.delete("/api/system/menu",{data:_})}const rl=["arrow-down","arrow-fall","arrow-left","arrow-right","arrow-rise","arrow-up","caret-down","caret-left","caret-right","caret-up","double-down","double-left","double-right","double-up","down-circle","down","drag-arrow","expand","left-circle","left","menu-fold","menu-unfold","right-circle","right","rotate-left","rotate-right","shrink","swap","to-bottom","to-left","to-right","to-top","up-circle","up","check-circle-fill","close-circle-fill","exclamation-circle-fill","exclamation-polygon-fill","info-circle-fill","minus-circle-fill","plus-circle-fill","question-circle-fill","check-circle","check-square","check","clock-circle","close-circle","close","exclamation-circle","exclamation","info-circle","info","minus-circle","minus","plus-circle","plus","question-circle","question","stop","heart-fill","star-fill","thumb-down-fill","thumb-up-fill","at","cloud-download","code-block","code-square","code","customer-service","download","export","eye-invisible","eye","heart","history","home","import","launch","list","message-banned","message","more-vertical","more","poweroff","refresh","reply","save","scan","search","select-all","send","settings","share-alt","share-external","share-internal","star","sync","thumb-down","thumb-up","translate","upload","voice","align-center","align-left","align-right","attachment","bg-colors","bold","brush","copy","delete","edit","eraser","filter","find-replace","font-colors","formula","h1","h2","h3","h4","h5","h6","h7","highlight","italic","line-height","link","oblique-line","ordered-list","original-size","paste","quote","redo","scissor","sort-ascending","sort-descending","sort","strikethrough","underline","undo","unordered-list","zoom-in","zoom-out","mute-fill","pause-circle-fill","play-arrow-fill","play-circle-fill","skip-next-fill","skip-previous-fill","sound-fill","backward","forward","fullscreen-exit","fullscreen","live-broadcast","music","mute","pause-circle","pause","play-arrow","play-circle","record-stop","record","skip-next","skip-previous","sound","bytedance-color","lark-color","tiktok-color","xigua-color","faceBook-circle-fill","facebook-square-fill","google-circle-fill","qq-circle-fill","twitter-circle-fill","weibo-circle-fill","alipay-circle","code-sandbox","codepen","facebook","github","gitlab","google","qq-zone","qq","twitter","wechat","wechatpay","weibo","chinese-fill","english-fill","face-frown-fill","face-meh-fill","face-smile-fill","moon-fill","pen-fill","sun-fill","apps","archive","bar-chart","book","bookmark","branch","bug","bulb","calendar-clock","calendar","camera","cloud","command","common","compass","computer","copyright","dashboard","desktop","dice","drag-dot-vertical","drag-dot","drive-file","ear","email","empty","experiment","file-audio","file-image","file-pdf","file-video","file","fire","folder-add","folder-delete","folder","gift","idcard","image-close","image","interaction","language","layers","layout","loading","location","lock","loop","man","menu","mind-mapping","mobile","moon","mosaic","nav","notification-close","notification","palette","pen","phone","printer","public","pushpin","qrcode","relation","robot-add","robot","safe","schedule","shake","skin","stamp","storage","subscribe-add","subscribe","subscribed","sun","tag","tags","thunderbolt","tool","trophy","unlock","user-add","user-group","user","video-camera","wifi","woman"],sl={class:"container"},dl={class:"action-icon"},cl={class:"action-icon"},pl={id:"tableSetting"},ml={style:{"margin-right":"4px",cursor:"move"}},fl={class:"title"},_l=Ve({__name:"index",setup(_){const k=g(!1),E=g(!1),R=g(),{loading:Y,setLoading:H}=ul(!0),U=g([]),t=g({}),y=g([]),V=g([]),I=g("medium"),Z=S(()=>rl),ee=S(()=>[{label:"\u83DC\u5355",value:"M"},{label:"\u63A5\u53E3",value:"A"},{label:"\u63A5\u53E3\u7EC4",value:"G"}]),le=S(()=>[{title:"\u83DC\u5355\u6807\u9898",dataIndex:"locale",slotName:"title"},{title:"\u83DC\u5355\u8DEF\u7531",dataIndex:"path",slotName:"path"},{title:"\u83DC\u5355\u7C7B\u578B",dataIndex:"type",slotName:"type"},{title:"\u662F\u5426\u9690\u85CF",dataIndex:"is_hidden",slotName:"isHidden"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",slotName:"createdAt"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updatedAt"},{title:"\u64CD\u4F5C\u4EBA\u5458",dataIndex:"operator"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations"}]),x=async n=>{H(!0);try{const{data:a}=await tl(n);U.value=[a]}finally{H(!1)}};x();const ue=n=>{I.value=n},ae=(n,a,c)=>{n?y.value.splice(c,0,a):y.value=V.value.filter(p=>p.dataIndex!==a.dataIndex)},j=n=>{t.value={},n&&(t.value.parent_id=n),t.value.weight=0,E.value=!0,k.value=!0},te=async n=>{await il({id:n}),await x(),L.success("\u5220\u9664\u6210\u529F")},oe=n=>{t.value=X(n),E.value=!1,k.value=!0},ne=async()=>{if(await R.value.validate())return!1;const a=X(t.value);return E.value?(await ol(a),L.success("\u521B\u5EFA\u6210\u529F")):(await nl(a),L.success("\u66F4\u65B0\u6210\u529F")),await x(),!0},J=(n,a,c,p=!1)=>{const m=p?P(n):n;return a>-1&&c>-1&&m.splice(a,1,m.splice(c,1,m[a]).pop()),m},ie=n=>{n&&Ue(()=>{const a=document.getElementById("tableSetting");new al(a,{onEnd(c){const{oldIndex:p,newIndex:m}=c;J(y.value,p,m),J(V.value,p,m)}})})};return xe(()=>le.value,n=>{y.value=P(n),y.value.forEach((a,c)=>{a.checked=!0}),V.value=P(y.value)},{deep:!0,immediate:!0}),(n,a)=>{const c=b("Breadcrumb"),p=b("icon-plus"),m=Ie,K=Te,re=b("icon-refresh"),T=ze,se=b("icon-line-height"),de=Ze,ce=Me,pe=b("icon-settings"),me=b("icon-drag-arrow"),fe=el,_e=Ne,ve=Se,z=$e,f=Oe,ge=b("icon-edit"),be=b("icon-delete"),he=Ge,ye=Le,Fe=Pe,Ce=Re,d=He,C=je,ke=qe,W=Je,we=ll,v=Ke,M=We,Be=Xe,De=Qe,w=Ae("permission");return o(),B("div",sl,[u(c),u(Fe,{class:"general-card",title:"\u83DC\u5355\u7BA1\u7406"},{default:l(()=>[u(ve,{style:{"margin-bottom":"16px","align-items":"center"}},{default:l(()=>[u(K,{span:12},{default:l(()=>[D((o(),i(m,{type:"primary",onClick:a[0]||(a[0]=e=>j(void 0))},{icon:l(()=>[u(p)]),default:l(()=>[r(" \u65B0\u5EFA\u83DC\u5355 ")]),_:1})),[[w,"system:menu:add"]])]),_:1}),u(K,{span:12,style:{display:"flex",flex:"1","align-items":"center","justify-content":"end"}},{default:l(()=>[u(T,{content:"\u5237\u65B0"},{default:l(()=>[h("div",{class:"action-icon",onClick:x},[u(re,{size:"18"})])]),_:1}),u(ce,{onSelect:ue},{content:l(()=>[(o(!0),B($,null,O(n.$densityList,e=>(o(),i(de,{key:e.value,value:e.value,class:Ye({active:e.value===I.value})},{default:l(()=>[h("span",null,F(e.name),1)]),_:2},1032,["value","class"]))),128))]),default:l(()=>[u(T,{content:"\u5B57\u4F53\u5927\u5C0F"},{default:l(()=>[h("div",dl,[u(se,{size:"18"})])]),_:1})]),_:1}),u(T,{content:"\u884C\u8BBE\u7F6E"},{default:l(()=>[u(_e,{trigger:"click",position:"bl",onPopupVisibleChange:ie},{content:l(()=>[h("div",pl,[(o(!0),B($,null,O(V.value,(e,q)=>(o(),B("div",{key:e.dataIndex,class:"setting"},[h("div",ml,[u(me)]),h("div",null,[u(fe,{modelValue:e.checked,"onUpdate:modelValue":N=>e.checked=N,onChange:N=>ae(N,e,q)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),h("div",fl,F(e.title==="#"?"index":e.title),1)]))),128))])]),default:l(()=>[h("div",cl,[u(pe,{size:"18"})])]),_:1})]),_:1})]),_:1})]),_:1}),D((o(),i(ye,{"row-key":"id",loading:G(Y),columns:y.value,data:U.value,bordered:!1,size:I.value},{title:l(({record:e})=>[u(z,null,{default:l(()=>[e.icon?(o(),i(Q,{key:0,type:e.icon,size:20},null,8,["type"])):s("",!0),r(" "+F(e.title),1)]),_:2},1024)]),isHidden:l(({record:e})=>[e.is_hidden?(o(),i(f,{key:0,color:"red"},{default:l(()=>[r("\u9690\u85CF")]),_:1})):(o(),i(f,{key:1,color:"green"},{default:l(()=>[r("\u663E\u793A")]),_:1}))]),type:l(({record:e})=>[e.type==="R"?(o(),i(f,{key:0,color:"arcoblue"},{default:l(()=>[r("\u6839\u83DC\u5355")]),_:1})):s("",!0),e.type==="M"?(o(),i(f,{key:1,color:"arcoblue"},{default:l(()=>[r("\u83DC\u5355")]),_:1})):s("",!0),e.type==="A"?(o(),i(f,{key:2,color:"orange"},{default:l(()=>[r("\u63A5\u53E3\uFF5C"+F(e.method),1)]),_:2},1024)):s("",!0),e.type==="G"?(o(),i(f,{key:3,color:"green"},{default:l(()=>[r("\u63A5\u53E3\u7EC4")]),_:1})):s("",!0)]),createdAt:l(({record:e})=>[r(F(n.$formatTime(e.created_at)),1)]),updatedAt:l(({record:e})=>[r(F(n.$formatTime(e.updated_at)),1)]),operations:l(({record:e})=>[u(z,{class:"cursor-pointer"},{default:l(()=>[D((o(),i(f,{color:"arcoblue",onClick:q=>j(e.id)},{icon:l(()=>[u(p)]),default:l(()=>[r(" \u65B0\u5EFA ")]),_:2},1032,["onClick"])),[[w,"system:menu:add"]]),e.id!=1?D((o(),i(f,{key:0,color:"orangered",onClick:q=>oe(e)},{icon:l(()=>[u(ge)]),default:l(()=>[r(" \u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[w,"system:menu:update"]]):s("",!0),e.id!=1?D((o(),i(he,{key:1,content:"\u60A8\u786E\u8BA4\u5220\u9664\u6B64\u83DC\u5355",type:"warning",onOk:q=>te(e.id)},{default:l(()=>[u(f,{color:"red"},{icon:l(()=>[u(be)]),default:l(()=>[r(" \u5220\u9664 ")]),_:1})]),_:2},1032,["onOk"])),[[w,"system:menu:delete"]]):s("",!0)]),_:2},1024)]),_:1},8,["loading","columns","data","size"])),[[w,"system:menu:query"]])]),_:1}),u(De,{visible:k.value,"onUpdate:visible":a[14]||(a[14]=e=>k.value=e),title:E.value?"\u65B0\u5EFA":"\u4FEE\u6539",width:"380px",onCancel:a[15]||(a[15]=e=>k.value=!1),onBeforeOk:ne},{default:l(()=>[u(Be,{ref_key:"submitFormRef",ref:R,model:t.value,"label-align":"left",layout:"horizontal","auto-label-width":""},{default:l(()=>[u(d,{field:"parent_id",label:"\u7236\u83DC\u5355",rules:[{required:!0,message:"\u7236\u83DC\u5355\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(Ce,{modelValue:t.value.parent_id,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.parent_id=e),"check-strictly":"",options:U.value,"field-names":{value:"id",label:"title"},placeholder:"\u8BF7\u9009\u62E9\u7236\u83DC\u5355","allow-search":""},null,8,["modelValue","options"])]),_:1}),u(d,{field:"title",label:"\u6807\u9898",rules:[{required:!0,message:"\u6807\u9898\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.title,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.title=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u6807\u9898","allow-clear":""},null,8,["modelValue"])]),_:1}),u(d,{field:"weight",label:"\u83DC\u5355\u6743\u91CD",rules:[{required:!0,message:"\u83DC\u5355\u6743\u91CD\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(ke,{modelValue:t.value.weight,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.weight=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u6743\u91CD","default-value":0,mode:"button"},null,8,["modelValue"])]),_:1}),u(d,{field:"type",label:"\u83DC\u5355\u7C7B\u578B",rules:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(W,{modelValue:t.value.type,"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.type=e),options:G(ee),placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u7C7B\u578B"},null,8,["modelValue","options"])]),_:1}),t.value.type==="M"?(o(),i(d,{key:0,field:"name",label:"\u83DC\u5355\u6807\u8BC6",rules:[{required:!0,message:"\u83DC\u5355\u6807\u8BC6\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.name,"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u6807\u8BC6","allow-clear":""},null,8,["modelValue"])]),_:1})):s("",!0),t.value.type==="M"?(o(),i(d,{key:1,field:"icon",label:"\u83DC\u5355\u56FE\u6807",rules:[{required:!0,message:"\u83DC\u5355\u56FE\u6807\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(W,{modelValue:t.value.icon,"onUpdate:modelValue":a[6]||(a[6]=e=>t.value.icon=e),"allow-search":"",placeholder:"\u8BF7\u9009\u62E9\u83DC\u5355\u56FE\u6807"},{default:l(()=>[(o(!0),B($,null,O(G(Z),e=>(o(),i(we,{key:e},{default:l(()=>[u(z,{align:"center"},{default:l(()=>[u(Q,{type:e,size:18},null,8,["type"]),r(F(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})):s("",!0),t.value.type==="A"?(o(),i(d,{key:2,field:"method",label:"\u8BF7\u6C42\u65B9\u6CD5","validate-trigger":["change","input"],rules:[{required:!0,message:"\u8BF7\u6C42\u65B9\u6CD5\u662F\u5FC5\u586B\u9879"}]},{default:l(()=>[u(M,{modelValue:t.value.method,"onUpdate:modelValue":a[7]||(a[7]=e=>t.value.method=e)},{default:l(()=>[u(v,{value:"GET"},{default:l(()=>[r("GET")]),_:1}),u(v,{value:"POST"},{default:l(()=>[r("POST")]),_:1}),u(v,{value:"PUT"},{default:l(()=>[r("PUT")]),_:1}),u(v,{value:"DELETE"},{default:l(()=>[r("DELETE")]),_:1})]),_:1},8,["modelValue"])]),_:1})):s("",!0),t.value.type!=="M"?(o(),i(d,{key:3,field:"permission",label:"\u6743\u9650\u6307\u4EE4",rules:[{required:!0,message:"\u6743\u9650\u6307\u4EE4\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.permission,"onUpdate:modelValue":a[8]||(a[8]=e=>t.value.permission=e),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u6307\u4EE4","allow-clear":""},null,8,["modelValue"])]),_:1})):s("",!0),t.value.type!=="G"?(o(),i(d,{key:4,field:"path",label:"\u83DC\u5355\u8DEF\u5F84",rules:[{required:!0,message:"\u83DC\u5355\u8DEF\u5F84\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.path,"onUpdate:modelValue":a[9]||(a[9]=e=>t.value.path=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84","allow-clear":""},null,8,["modelValue"])]),_:1})):s("",!0),t.value.type==="M"?(o(),i(d,{key:5,field:"component",label:"\u83DC\u5355\u7EC4\u4EF6","validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.component,"onUpdate:modelValue":a[10]||(a[10]=e=>t.value.component=e),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u7EC4\u4EF6","allow-clear":""},null,8,["modelValue"])]),_:1})):s("",!0),t.value.type==="M"?(o(),i(d,{key:6,field:"redirect",label:"\u8DF3\u8F6C\u8DEF\u7531","validate-trigger":["change","input"]},{default:l(()=>[u(C,{modelValue:t.value.redirect,"onUpdate:modelValue":a[11]||(a[11]=e=>t.value.redirect=e),placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u8DEF\u7531","allow-clear":""},null,8,["modelValue"])]),_:1})):s("",!0),t.value.type==="M"?(o(),i(d,{key:7,field:"hidden",label:"\u662F\u5426\u9690\u85CF","validate-trigger":["change","input"]},{default:l(()=>[u(M,{modelValue:t.value.is_hidden,"onUpdate:modelValue":a[12]||(a[12]=e=>t.value.is_hidden=e),"default-value":!1},{default:l(()=>[u(v,{value:!1},{default:l(()=>[r("\u5426")]),_:1}),u(v,{value:!0},{default:l(()=>[r("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1})):s("",!0),t.value.type==="M"?(o(),i(d,{key:8,field:"cache",label:"\u662F\u5426\u7F13\u5B58","validate-trigger":["change","input"]},{default:l(()=>[u(M,{modelValue:t.value.is_cache,"onUpdate:modelValue":a[13]||(a[13]=e=>t.value.is_cache=e),"default-value":!1},{default:l(()=>[u(v,{value:!1},{default:l(()=>[r("\u5426")]),_:1}),u(v,{value:!0},{default:l(()=>[r("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1})):s("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const Il=Ee(_l,[["__scopeId","data-v-0452d343"]]);export{Il as default};
