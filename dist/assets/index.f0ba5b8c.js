import{d as q,_ as fe}from"./index.16f36a6f.js";/* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as Fe,e as d,c as Ee,w as ge,aG as r,bz as be,B as i,C as h,aJ as t,aI as a,bA as y,aD as f,aN as _,F as p,aL as O,aK as P,u as Ce,aO as B,aE as R,aV as I,n as he,aW as ye,bf as Be,bw as we,bx as xe,by as ke,bq as Ae,bs as Ve,bE as De,b6 as Ie,bp as Te,bk as Ne,bF as ze,b3 as Se,b2 as $e,bG as Ue,b7 as Le,aX as qe,D as Oe,bD as Pe,b5 as Re}from"./arco.a57bda95.js";import{u as Ge}from"./loading.6f29e790.js";import{g as je,d as Je,a as Ke,u as Me}from"./team.5b92fd8c.js";import{S as We,c as T}from"./sortable.esm.0dde07ee.js";import"./chart.bcf2bc51.js";import"./vue.7a37bc5c.js";const Xe={class:"container"},He={class:"action-icon"},Qe={class:"action-icon"},Ye={id:"tableSetting"},Ze={style:{"margin-right":"4px",cursor:"move"}},et={class:"title"},tt=Fe({__name:"index",setup(at){const v=d(!1),F=d(!1),N=d(),{loading:G,setLoading:z}=Ge(!0),w=d([]),u=d({}),m=d([]),E=d([]),x=d("medium"),j=Ee(()=>[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",slotName:"name"},{title:"\u90E8\u95E8\u63CF\u8FF0",dataIndex:"description",slotName:"description"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",slotName:"createdAt"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",slotName:"updatedAt"},{title:"\u64CD\u4F5C\u4EBA\u5458",dataIndex:"operator"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations"}]),g=async n=>{z(!0);try{const{data:o}=await je(n);w.value=[o]}finally{z(!1)}};g();const J=n=>{x.value=n},K=(n,o,s)=>{n?m.value.splice(s,0,o):m.value=E.value.filter(c=>c.dataIndex!==o.dataIndex)},S=n=>{u.value={},n&&(u.value.parent_id=n),F.value=!0,v.value=!0},M=async n=>{await Je({id:n}),await g(),I.success("\u5220\u9664\u6210\u529F")},W=n=>{u.value=q(n),F.value=!1,v.value=!0},X=async()=>{if(await N.value.validate())return!1;const o=q(u.value);return F.value?(await Ke(o),I.success("\u521B\u5EFA\u6210\u529F")):(await Me(o),I.success("\u66F4\u65B0\u6210\u529F")),await g(),!0},$=(n,o,s,c=!1)=>{const l=c?T(n):n;return o>-1&&s>-1&&l.splice(o,1,l.splice(s,1,l[o]).pop()),l},H=n=>{n&&he(()=>{const o=document.getElementById("tableSetting");new We(o,{onEnd(s){const{oldIndex:c,newIndex:l}=s;$(m.value,c,l),$(E.value,c,l)}})})};return ge(()=>j.value,n=>{m.value=T(n),m.value.forEach((o,s)=>{o.checked=!0}),E.value=T(m.value)},{deep:!0,immediate:!0}),(n,o)=>{const s=r("Breadcrumb"),c=r("icon-plus"),l=ye,U=Be,Q=r("icon-refresh"),k=we,Y=r("icon-line-height"),Z=Pe,ee=xe,te=r("icon-settings"),ae=r("icon-drag-arrow"),oe=Re,ne=ke,ue=Ae,L=r("icon-edit"),A=Ve,se=r("icon-delete"),le=De,ie=Ie,ce=Te,de=Ne,re=ze,V=Se,pe=$e,me=Ue,_e=Le,ve=qe,b=be("permission");return i(),h("div",Xe,[t(s),t(de,{class:"general-card",title:"\u90E8\u95E8\u7BA1\u7406"},{default:a(()=>[t(ue,{style:{"margin-bottom":"16px","align-items":"center"}},{default:a(()=>[t(U,{span:12},{default:a(()=>[y((i(),f(l,{type:"primary",onClick:o[0]||(o[0]=e=>S(void 0))},{icon:a(()=>[t(c)]),default:a(()=>[_(" \u65B0\u5EFA\u90E8\u95E8 ")]),_:1})),[[b,"system:team:add"]])]),_:1}),t(U,{span:12,style:{display:"flex",flex:"1","align-items":"center","justify-content":"end"}},{default:a(()=>[t(k,{content:"\u5237\u65B0"},{default:a(()=>[p("div",{class:"action-icon",onClick:g},[t(Q,{size:"18"})])]),_:1}),t(ee,{onSelect:J},{content:a(()=>[(i(!0),h(O,null,P(n.$densityList,e=>(i(),f(Z,{key:e.value,value:e.value,class:Oe({active:e.value===x.value})},{default:a(()=>[p("span",null,B(e.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[t(k,{content:"\u5B57\u4F53\u5927\u5C0F"},{default:a(()=>[p("div",He,[t(Y,{size:"18"})])]),_:1})]),_:1}),t(k,{content:"\u5217\u8BBE\u7F6E"},{default:a(()=>[t(ne,{trigger:"click",position:"bl",onPopupVisibleChange:H},{content:a(()=>[p("div",Ye,[(i(!0),h(O,null,P(E.value,(e,C)=>(i(),h("div",{key:e.dataIndex,class:"setting"},[p("div",Ze,[t(ae)]),p("div",null,[t(oe,{modelValue:e.checked,"onUpdate:modelValue":D=>e.checked=D,onChange:D=>K(D,e,C)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),p("div",et,B(e.title==="#"?"index":e.title),1)]))),128))])]),default:a(()=>[p("div",Qe,[t(te,{size:"18"})])]),_:1})]),_:1})]),_:1})]),_:1}),t(ce,{"row-key":"id",loading:Ce(G),columns:m.value,data:w.value,bordered:!1,size:x.value},{createdAt:a(({record:e})=>[_(B(n.$formatTime(e.created_at)),1)]),updatedAt:a(({record:e})=>[_(B(n.$formatTime(e.updated_at)),1)]),operations:a(({record:e})=>[t(ie,{class:"cursor-pointer"},{default:a(()=>[y((i(),f(A,{color:"arcoblue",onClick:C=>S(e.id)},{icon:a(()=>[t(L)]),default:a(()=>[_("\u65B0\u5EFA ")]),_:2},1032,["onClick"])),[[b,"system:team:add"]]),e.id!=1?y((i(),f(A,{key:0,color:"orangered",onClick:C=>W(e)},{icon:a(()=>[t(L)]),default:a(()=>[_("\u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[b,"system:team:update"]]):R("",!0),e.id!=1?y((i(),f(le,{key:1,content:"\u60A8\u786E\u8BA4\u8981\u5220\u9664\u6B64\u90E8\u95E8\uFF1F",type:"warning",onOk:C=>M(e.id)},{default:a(()=>[t(A,{color:"red"},{icon:a(()=>[t(se)]),default:a(()=>[_("\u5220\u9664 ")]),_:1})]),_:2},1032,["onOk"])),[[b,"system:team:delete"]]):R("",!0)]),_:2},1024)]),_:1},8,["loading","columns","data","size"])]),_:1}),t(ve,{visible:v.value,"onUpdate:visible":o[4]||(o[4]=e=>v.value=e),title:F.value?"\u65B0\u5EFA":"\u4FEE\u6539",width:"380px",onCancel:o[5]||(o[5]=e=>v.value=!1),onBeforeOk:X},{default:a(()=>[t(_e,{ref_key:"submitFormRef",ref:N,model:u.value,"label-align":"left",layout:"horizontal","auto-label-width":""},{default:a(()=>[t(V,{field:"parent_id",label:"\u4E0A\u7EA7\u90E8\u95E8",rules:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:a(()=>[t(re,{modelValue:u.value.parent_id,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value.parent_id=e),"check-strictly":"","field-names":{value:"id",label:"name"},options:w.value,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8","allow-search":""},null,8,["modelValue","options"])]),_:1}),t(V,{field:"name",label:"\u90E8\u95E8\u540D\u79F0",rules:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:a(()=>[t(pe,{modelValue:u.value.name,"onUpdate:modelValue":o[2]||(o[2]=e=>u.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0","allow-clear":""},null,8,["modelValue"])]),_:1}),t(V,{field:"description",label:"\u90E8\u95E8\u63CF\u8FF0",rules:[{required:!0,message:"\u90E8\u95E8\u63CF\u8FF0\u662F\u5FC5\u586B\u9879"}],"validate-trigger":["change","input"]},{default:a(()=>[t(me,{modelValue:u.value.description,"onUpdate:modelValue":o[3]||(o[3]=e=>u.value.description=e),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u63CF\u8FF0","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const Ct=fe(tt,[["__scopeId","data-v-045ac92c"]]);export{Ct as default};
